<!DOCTYPE html>
<html ng-app="myApp">
  <head>
    <meta charset="UTF-8" />
    <title>eventBus简单实现</title>
  </head>

  <body>
  </body>
  <script type="text/javascript">
    class EventBus {
       _events = {}
       $on (name, func) {
           if(this._events[name]) {
            this._events[name].push(func)
           }else {
            this._events[name] = [func]
           }
       }
       $emit(name, arg) {
        if(this._events[name]) {
            this._events[name].forEach(v => v(arg))
        }
       }
    }
    const bus = new EventBus()
    // 订阅
    bus.$on('click',v => console.log('你好'+v))
    bus.$on('click',v => console.log('吃饭了'+v))
    // 发布
    bus.$emit('click', '张三')
    bus.$emit('click', '李斯')
  </script>
</html>
