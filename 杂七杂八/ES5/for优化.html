<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        'use strict'
        var values = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19];
        values.length = 10000;
        var sum = 5;
        function process(arr) {
          sum *=  arr;
        }
        var time1 = new Date().getTime();
        var iterations = Math.floor(values.length / 8);
        var leftover = values.length % 8;
        var i = 0;
        if (leftover > 0) {
            do {
                process(values[i++]);
            } while (--leftover > 0);
        }
        do {
            process(values[i++]);
            process(values[i++]);
            process(values[i++]);
            process(values[i++]);
            process(values[i++]);
            process(values[i++]);
            process(values[i++]);
            process(values[i++]);
        } while (--iterations > 0);

        var time2 = new Date().getTime();
        console.log('时间', time2 - time1, '毫秒');

        // var iterations = Math.ceil(values.length / 8);
        // var startAt = values.length % 8;
        // var i = 0;
        // var time1 = new Date().getTime();
        // do {
        //     switch (startAt) {
        //         case 0:
        //             process(values[i++]);
        //         case 7:
        //             process(values[i++]);
        //         case 6:
        //             process(values[i++]);
        //         case 5:
        //             process(values[i++]);
        //         case 4:
        //             process(values[i++]);
        //         case 3:
        //             process(values[i++]);
        //         case 2:
        //             process(values[i++]);
        //         case 1:
        //             process(values[i++]);
        //     }
        //     startAt = 0;
        // } while (--iterations > 0);
        // var time2 = new Date().getTime();
        // console.log('时间', time2 - time1, '毫秒');
    </script>
</body>

</html>